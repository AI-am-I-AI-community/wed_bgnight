---
title: "LLMと進めるソフトウェア設計の段階的アプローチ"
source: "https://ai-data-base.com/archives/91892"
author:
  - "[[AIDB Research]]"
published: 2025-07-07
created: 2025-07-09
description: "本記事ではLLMと一緒に進めるソフトウェア設計の方法を紹介します。設計作業は負担が大きく、もっと効率的に進めたいと感じる人も多いはずです。最近はコード生成などでLLMを使う事例が増えていますが、設計作業での活用はまだこれからです。"
tags:
  - "clippings"
---
本記事ではLLMと一緒に進めるソフトウェア設計の方法を紹介します。

設計作業は負担が大きく、もっと効率的に進めたいと感じる人も多いはずです。最近はコード生成などでLLMを使う事例が増えていますが、設計作業での活用はまだこれからです。

今回はLLMを活用して設計を段階的に進める取り組みがどこまで使えるのか、実例を交えてお伝えします。

![](https://ai-data-base.com/wp-content/uploads/2025/07/AIDB_91892-1024x576.png)

## 背景

ソフトウェアの設計は、手間と時間がかかる作業です。システムの性能や使いやすさを守りながら形を整えるには設計者の知識と経験に頼ることが多く、負担の大きさが課題になっています。

そんな中、LLMが進化し、ソフトウェア開発のさまざまな場面で使われるようになっています。ただ、コード生成やテスト支援では成果が出ている一方で、設計作業の支援についてはまだ成果が十分には出てきていません。LLMは設計パターンや実践知も学んでいるため、ソフトウェア設計作業の支援にも活用できる可能性があります。

そこでこの記事では、LLMと一緒に設計作業を進めていくアプローチを紹介します。モデルに設計の進め方を伝えながら段階的に作業を進めることで、どこまで設計の支援ができるのかが検証されてきています。効率化だけでなく、質を保ちながら進めるヒントも見えてきます。

ソフトウェア設計の負担を減らし、開発を加速させたいと考えている方にとって、参考になる内容を目指します。

## ソフトウェア設計支援ツールはどこまで進んできたか

LLMが登場する前から、ソフトウェア設計の負担を減らすためにさまざまな工夫が試されてきました。この流れを振り返ると、今どこまでできていて、何がまだ課題なのかが見えてきます。

### ルールベースの設計支援から始まった取り組み

昔から「ArchE」のような [ルールベース](https://ai-data-base.com/archives/26614 "ルールベース") のツールで設計作業を支援しようとする取り組みがありました。設計パターンを提案するツールも登場しましたが、設計作業そのものの複雑さが大きな壁となり、ツールだけで負担を減らすのは難しい状況が続いていました。

### コード生成で成果を出したLLMの登場

LLMの登場で状況が変わり、コード生成やテスト支援では成果が出るようになってきました。ただ、設計支援への応用については、まだ模索が続いています。

### 要件から設計案を自動生成する動き

最新の研究では、要件文書からシステムのドメインモデルを自動生成し、複数の設計候補を導き出して比較・評価する方法が試されています。過去の設計知識を生かして新しい設計判断を生み出す方法も提案されています（「DRAFT」という取り組み）。

### 要件理解から最適な設計を探す取り組み

自然言語で書かれた要件から設計に必要な部分を抽出し、最適な設計案を見つけるアプローチも試されています（「ARLO」という手法）。数理最適化を活用し、設計の質を高めることを目指しています。

### 設計支援でLLMとどう付き合うか

LLMを使った設計支援では、どのように対話を進めるかが重要です。

例えば、段階的に作業を進めることで複雑な設計に対応しやすくなることが知られています（「Progressive Prompting」）。また、設計者の役割設定やプロジェクト背景の共有など、段階を踏んだ進め方で精度を高める工夫も試されてきました（「Prompt Pattern Sequences」）。

### 開発中にも使えるリアルタイム提案ツール

Visual StudioなどのIDE内でリアルタイムに設計パターンを提案するツールも出てきており（Cursorなど）、設計パターンの学習コストを下げつつ、すぐ活用できる環境が整いつつあります。

### LLMの設計支援にはまだ限界もある

ただ、LLMによる設計支援はまだ完全ではありません。同じ質問でも回答が変わる「再現性の低さ」や、「一貫性の不足」、コンポーネント間の関係性が不明確になるなどの課題があります。現状では、LLMは「設計のヒントをくれる相棒」として使うのが現実的です。

### 今回紹介するのは「設計の進め方を教える」アプローチ

こうした課題を踏まえ、今回紹介するのはLLMに設計の進め方を事前に教え込み、一緒に設計作業を進めるアプローチです。計画を立て、一つの設計文書を更新しながらモデルと設計者が協力して進める方法で、どこまで実践で役立つかが検証されています。

## 設計を”段階的に進める考え方”（ADD）をおさらい

LLM登場以前から使われてきたソフトウェア [アーキテクチャ](https://ai-data-base.com/archives/26562 "アーキテクチャ") 設計の手法で「ADD」があります。

システムの要件を整理しながら段階的に設計を進める仕組みとして多くの現場で実践されています。今回の研究では、この実績あるADDの枠組みをLLMと組み合わせて活用する方法を検証しています。

### 七つのステップで進める

ADDでは設計を一度に決め切らず、七つのステップに分けて進めていきます。LLMと組み合わせる際にも相性が良い方法とされています。複雑な設計も整理しながら進められるためです。

### ①設計の目的と要件を整理するステップ

設計の目的、機能要件、性能や信頼性などの品質要件、制約条件を整理するところから始めます。

要件には「一秒以内に応答する」など具体的な指標を使い、”要件書に書かれていないが設計で決める必要がある内容”もここで整理します。

### ②反復作業で取り組む内容を決めるステップ

設計は複数回の反復で進めるため、その回ごとに取り組む内容を決めます。

重要な要件から優先して取り組むことで効率的に進められます。

### ③詳細化する部分を選ぶステップ

その回の反復で詳細化する部分を選びます。

最初はシステム全体を一つの要素として捉え、そこから少しずつ分解して進めます。

### ④設計パターンなどを選ぶステップ

目標達成のために参考となるアーキテクチャ、設計パターン、実践的な戦術、フレームワークを選びます。

ゼロから考えるのではなく、これまで使われてきた知見を活用することで信頼性の高い設計につなげます。

### ⑤要素同士を具体化するステップ

選んだパターンやフレームワークをもとに、要素同士の役割や関係性を決め、連携の仕組みも考えます。

この段階でシステムの構造が具体的に形になっていきます。

### ⑥設計内容を図と文章でまとめるステップ

設計の図を描き、内容を文章で残します。

その際、なぜその設計を選んだのか理由も含めて記録しておきます。

### ⑦設計内容を振り返るステップ

目標が達成できたかを確認し、必要があれば次の反復で取り組む内容を計画します。

この繰り返しによって設計を洗練させていきます。

### 設計で特に難しいこと

七つのステップの中でも、設計パターンやフレームワークを選ぶ段階と、それらを実際の構造に落とし込む段階はとくに難易度が高くなります。  
選択肢が多すぎるため何を使うか決めるだけでも負担が大きく、選んだものを使って新しい要素をどのように作るか、パターンをどう適用するか、技術をどう選ぶかなど多くの判断が必要になります。

また、要素同士のつながりや役割分担を整理する作業も重要であり、簡単に進められるものではありません。これまでの研究では負担が大きいことからこの部分を扱わない例もありましたが、今回は、まさにこの難しい部分でLLMを活用することに取り組んでいます。

## LLMと一緒に設計を進める具体的なアプローチ

上述した考え方を活かしながらLLMと一緒に設計作業を進める具体的な方法を整理します。

今回は、LLMベースのコーディングアシスタントを使って設計を進める方法が提案されています。設計作業では複数のファイルを同時に扱う場面が多く、そのままコードに変換しやすいという理由から、この方法が選ばれています。

### 三つの基本要素

LLMに「三つの基本要素」を渡しながら設計作業を進めます。

#### ①ADDの手順をLLMに伝える

まずADDの各ステップを詳細にまとめた文書をLLMに伝えます。

LLMの内部知識に基づくだけでは誤った手順で進めることがあるため、正確なステップをあらかじめ共有することが必要になります。

手順は段階的に進めることで複雑な設計も整理しながら進められますが、実際の運用では少し調整を加えます。たとえば設計の具体化時にLLMが図を描きたがる傾向があるため、図作成のタイミングを前倒しし、図の記法もLLMが扱いやすいMermaidを使います。

本実験でLLMに提供されたADD手順説明ファイルのうち、一部（ステップ4～5）をまとめた日本語訳は下記のとおりです。

```js
### ステップ4 設計コンセプトの選定
- 反復目標を満たすために選ぶ設計コンセプトの例  
  - 参照アーキテクチャ、アーキテクチャパターン、デザインパターン、デプロイメントパターン  
  - フレームワークやクラウドリソースなどの外部コンポーネント  
  - 品質属性を改善する戦術  
- 選定結果を以下の表で記録  

| 選択した設計コンセプト | 理由 | 却下した代替案 |
|---|---|---|

### ステップ5 要素の具体化とインターフェース定義
- 選んだ設計コンセプトをもとに要素を具象化し、要素間の関係や責任範囲、インターフェースを定義  
- 具象化判断を以下の表で記録  

| 具象化判断 | 理由 |
|---|---|
```

#### ②設計者としての役割をLLMに伝える

LLMに「ソフトウェア設計者」という役割を与えます。

この役割を与える意味としては、設計者としての責任範囲、専門分野、目標、制約を考慮させるためです。たとえば「企業システムの設計経験があるシニア設計者」として要件分析、設計判断、文書作成などを担うイメージです。

クラウドアーキテクチャ、マイクロサービス、API設計、セキュリティ設計などの知識も併せて持つことを前提にします。

以下に、LLMに「ソフトウェア設計者」として振る舞ってもらうために設定された役割や専門分野、責任範囲などをまとめた「役割の仕様」の一部を記します（日本語化しました）。

```js
agent_specification:
  metadata:
    name: ソフトウェアアーキテクト
    version: 1.0.0
    description: |
      ソフトウェアアーキテクチャ設計に特化し
      複数ドメインやクラウドプラットフォームでの経験を持つ
    domain: エンタープライズシステム
    expertise_level: シニアアーキテクト

  identity:
    role: リードソリューションアーキテクト
    responsibilities:
      - 要件と制約の分析
      - エンタープライズシステム向けアーキテクチャ設計
      - 設計判断の比較検討
      - 設計と決定事項の文書化
    key_competencies:
      - アーキテクチャ設計
      - クラウドアーキテクチャ（AWS）
      - マイクロサービス設計
      - API設計
      - セキュリティ設計
      - データアーキテクチャ
      - UML
```

#### ③設計に必要な要件を整理する

設計に必要な要件をまとめてLLMに提供します。

- 主要な機能要件
- 性能や信頼性など具体的な指標を持つ品質要件
- 設計で考慮すべき事項、制約

などが含まれます。重要なのは機能要件と品質要件に優先順位をつけることです。どの要件から取り組むべきかをLLMが判断できるようにするためです。

ここで使用する指示文の例を示します。

```js
### 優先順位付けの例

**主要ユーザーストーリー**
- HPS-2 Change Prices （コアビジネスを支援）
- HPS-3 Query Prices （コアビジネスを支援）
- HPS-4 Manage Hotels （他機能の基盤を構築）

**品質属性シナリオの優先順位**
| シナリオID | 顧客視点の重要度 | 実装難易度 |
| --- | --- | --- |
| QA-1 Performance | 高 | 高 |
| QA-2 Reliability | 高 | 高 |
| QA-3 Availability | 高 | 高 |
| QA-4 Scalability | 高 | 高 |
| QA-5 Security | 高 | 中 |
| QA-6 Modifiability | 中 | 中 |
| QA-7 Deployability | 中 | 中 |
| QA-8 Monitorability | 中 | 中 |
| QA-9 Testability | 中 | 中 |

**選択された主要ドライバ**
- QA-1 Performance
- QA-2 Reliability
- QA-3 Availability
- QA-4 Scalability
- QA-5 Security
```

### 設計作業の進め方

LLMと設計を進める際には四つの段階を順番に進めていきます。

#### ①要件を確認するところから始める

まずLLMに要件を確認させて、優先順位が理解できているかどうかを確認します。

不明点があれば質問を受け付けて追加説明を行います。

```js
ArchitecturalDrivers.md を確認し、要件に矛盾がないことと優先順位が正しく整理されていることを確かめてください。不明点があれば質問してください。
```

#### ②ドメインモデルを作成する

要件分析の段階でドメインモデルを作成します。

先に作成することでLLMが作業中にドメインモデルを忘れずに済みます。

複雑なシステムではドメイン駆動設計の考え方を使い、シンプルな場合は基本的なモデルを作ります。モデルはクラス図で表し、要素の説明も表にまとめます。

つまり、「システムがどんなものを扱うのかを図にして整理」します。たとえばホテル予約システムなら、ホテル、部屋タイプ、予約、料金などが扱うものになります。

まずは、要件の中で出てくる「大事なもの」をリストにして、どんな情報を持つのか簡単にメモします。そのあと、それらの「もの同士がどうつながっているか」を線でつなぎ、図にします。図を作るときは紙に書くイメージですが、LLMにMermaid記法で書いてもらうとデジタルで共有しやすくなります。

この図を作っておくと、どんなサービスや機能が必要かを後のステップで決めるときに迷わなくなります。シンプルに言うと「設計を始める前に、システムが何を扱うかを整理して、見える化しておく」作業です。

ドメイン駆動設計の考え方を使う場合の指示

```js
ArchitecturalDrivers.md を元にドメイン駆動設計（DDD）でドメインモデルを作成してください。Design フォルダ内に DomainModel.md として保存し、Mermaid 記法でクラス図を描きます。要素を「Aggregate Root」「Entity」「Value Object」のいずれかとしてステレオタイプで示し、要素一覧と種類を表形式でまとめてください。
```

ドメイン駆動設計の考え方を使わない場合の指示

```js
ArchitecturalDrivers.md を元にシンプルなドメインモデルを作成してください。Design フォルダ内に DomainModel.md として保存し、Mermaid 記法でクラス図を描きます。各要素の説明を表形式でまとめてください。
```

#### ③設計の進め方を計画する

設計作業を始める前に反復回数と各反復で取り組む内容を計画します。

最初は全体のシステム構造を決め、その後は優先度の高い要件から順に取り組みます。

ビジネスで重要な要件を早い段階で扱うことも意識します。

指示文の例を示します。

```js
ArchitecturalDrivers.md の要件優先順位と DomainModel.md の内容をもとに、AttributeDrivenDesign.md の手順に沿って反復計画を作成してください。  
各反復での目標を記述し、最初の反復はシステム全体の構造設計、以降は優先度の高いドライバを順番に扱うようにしてください。  
ビジネスに直結する要件はできるだけ早い段階で取り組むことを意識してください。  
IterationPlan.md として Design フォルダ内に、反復番号・目標・対象ドライバを表形式でまとめて出力してください。
```

#### ④設計文書を更新しながら進める

設計作業は統一された”設計文書”を用い、反復ごとに更新しながら進めます。

この文書には全体構造から詳細設計まで情報を集約し、LLMは常にこの文書を参照しながら設計状況を把握します。

文書の構造はC4モデル（ソフトウェアアーキテクチャを4つの視点で整理して図で示す方法）を参考にしつつ、動的な振る舞いや設計判断の記録も含めます。

文書には以下の内容が含まれます。

- システムの概要と背景
- 優先順位をつけた要件
- ドメインモデル
- システム全体の構成図
- 各サービスの内部構成図
- 要件ごとの動作を示す図
- サービス間のインターフェース仕様
- 設計判断とその理由

各反復ごとに専用の記録も残し、その反復で検討した内容や理由を整理します。こうすることで設計の思考プロセスも追いやすくなります。設計はADDの手順に沿って進め、各ステップが終わるたびにLLMに作業を一時停止してもらい、人間が確認したうえで次に進めるようにします。この流れをとることで設計が意図しない方向へ進むことを防げます。

指示文の例を示します。

```js
Design フォルダに Architecture.md を作成し、以下の構成で初期版を用意してください

1. はじめに  
   ドキュメントの目的と概要を記述してください

2. コンテキスト図  
   ArchitecturalDrivers.md のコンテキスト図を貼り付け、その図が何を示すかを説明する文章を加えてください

3. アーキテクチャドライバ  
   ArchitecturalDrivers.md の要件と優先順位をまとめ、ユーザーストーリー、品質シナリオ、懸念、制約をそれぞれ別の表で整理してください

4. ドメインモデル  
   DomainModel.md で作成したドメインモデルを貼り付けてください

5. コンテナ図  
   C4 のコンテナ図のひな形を作り、各コンテナの名前と責務を表形式でまとめてください

6. コンポーネント図  
   各コンテナの内部構造を後で詳細化する旨の説明文を追加してください

7. シーケンス図  
   IterationPlan.md で指定されたユースケースや品質シナリオごとに空のシーケンス図を用意してください

8. インターフェース  
   サービス間の契約仕様を記述するセクションを空で用意してください

9. 設計判断  
   driver、decision、rationale、discarded alternative の列を持つ空の表を配置してください
```

実行する際は以下の通りです。

```js
AttributeDrivenDesign.md に記載された手順に従い、設計を開始してください
IterationPlan.md、DomainModel.md、ArchitecturalDrivers.md をこの反復の目標とみなし、Design フォルダ内に Iteration1.md を作成してください
ADD の各ステップを完了したら一時停止し、人間による確認と修正を受けたうえで次のステップに進むよう指示してください
```

## 実際に試した結果はどうだったか

LLMとADDを組み合わせた設計手法を実際に使い、どこまで実務で活用できるかを検証した結果を紹介します。三つの実験を通じて、異なる角度から手法の有効性を確認しました。

実験ではCursor IDE（v 0.49）とClaude Sonnet 3.7が使用されました。Claude Sonnet 3.7は当時プログラミング分野で高評価を受けており、Cursorの標準LLMとして使われていたためです。検証ではLLMの判断を基本的にそのまま活かし、各ステップで小さな修正のみを加えました。実際の現場で活用する場合は人間が積極的に確認・修正することが重要ですが、今回は「LLM任せにした場合どの程度の設計ができるのか」を確認することが目的でした。

### ホテル料金システムで比べてみた

最初の実験では、LLMを使ったADD設計が、実績のある設計とどの程度似た結果になるかが確認されました。実際に運用されているホテル料金システムが使用されました。書籍にADDを使った設計プロセスが詳細に記録されています。設計は四回の反復で進められていました。

- 一回目で全体構造を決定
- 二回目で主要機能の構造を決定
- 三回目で信頼性と可用性の要件を反映
- 四回目で開発運用要件を対応

一方、LLMが提案した計画では六回の反復が提案され、機能要件と品質要件をうまく組み合わせて関連する品質要件を選び取って進められました。

| 反復 | 目標 | 対応する要件 |
| --- | --- | --- |
| 1 | 全体構造とデプロイモデルの確立 | CRN-1 全体構造の確立／CON-6 クラウドネイティブ／CON-2 クラウド資源と認証サービス／CRN-5 継続的デプロイ基盤／QA-7 デプロイ容易性 |
| 2 | 価格計算と公開機能の設計 | HPS-2 価格変更（主要ユーザーストーリー）／QA-1 性能／QA-2 信頼性／CON-5 外部システム連携（REST API） |
| 3 | 価格照会機能と拡張性の対応 | HPS-3 価格照会（主要ユーザーストーリー）／QA-3 可用性／QA-4 拡張性 |
| 4 | ホテルおよび料金管理機能の実装 | HPS-4 ホテル管理（主要ユーザーストーリー）／HPS-5 料金管理 |
| 5 | セキュリティとユーザー管理の設計 | HPS-1 ログイン／HPS-6 ユーザー管理／QA-5 セキュリティ／CON-1 マルチプラットフォーム対応 |
| 6 | モジュール性強化と監視機能対応 | QA-6 修正容易性／QA-8 監視性／QA-9 テスト容易性／CRN-4 技術的負債回避 |

比較はシステム構造、コンポーネント、動作、契約、通信、ドメインモデリング、API管理、セキュリティ、拡張性、配置、テスト容易性の観点で行われました。

結果として両方の設計は「共通する設計判断を多く含み」、CQRSの採用やマイクロサービス構成など、現場でよく用いられる方針が一致していることが確認されました。

ただし書籍の事例は説明を目的としており一部要件が省略されていましたが、LLMが提案した設計はより幅広い要件に対応しており、実際の運用システムに近い構成が示されました。

### チケットシステムで要件充足度を確認した

二つ目の実験ではLLMを使ったADD設計が設定された要件をどの程度満たせるかが確認されました。検証にはコンサートチケット購入システムが使用されました。多くの人が仕組みをイメージしやすく、大量アクセスや決済処理、セキュリティ対応といった技術課題を含むため検証対象として適していたためです。

LLMによって四回の反復計画が提案されました。

- 一回目で全体構造と外部認証サービス連携
- 二回目でイベント管理と検索機能
- 三回目でチケット在庫管理と注文処理
- 四回目で決済処理とチケット発行

| 反復 | 目標 | 対応する要件 |
| --- | --- | --- |
| 1 | 基本構造の確立と外部認証サービス連携の実装 | US001 ユーザー登録（IdP）／US002 メール検証（IdP）／US003 ログイン（IdP）／US004 パスワードリセット（IdP）／QAS004 認証セキュリティ／QAS022 環境整合性／QAS014 外部サービス統合 |
| 2 | イベント管理機能と基本検索機能の実装 | US005 イベント作成／US007 イベント一覧表示／US018 基本検索／QAS002 検索応答時間／QAS009 モバイル対応 |
| 3 | 在庫管理と注文処理機能の実装 | US009 在庫作成／US010 在庫更新／US012 チケット選択／US014 注文確定／QAS001 高同時接続／QAS007 トランザクション整合性／QAS008 データ整合性／QAS013 支払い連携 |
| 4 | 決済処理とチケット発行機能の実装 | US013 決済処理／US015 チケット生成／US016 チケット配送／QAS003 決済データ保護／QAS006 データベース拡張／QAS015 システム復旧 |

完成した設計は包括的なアーキテクチャ文書としてまとめられました。この設計については二名の経験豊富な設計者に協力が依頼され、1.5時間の評価会議が実施されました。評価ではシナリオベースで確認が行われ、軽量版ATAMに近い形で要件の充足度が確認されました。

主な評価結果は次の通りです。

- ユーザーログインではOAuth2やSSOによる外部認証、JWT、Redisセッション管理が提案され、部分的に満足から満足という評価
- チケット選択では在庫予約、楽観的ロック、コネクションプール利用が提案され、両評価者とも満足という評価
- 決済処理では決済ゲートウェイアダプタ、専用決済サービス、強固なセキュリティ対応が提案され、両評価者とも満足という評価

| ドライバ | 対応内容 | 評価者1 | 評価者2 |
| --- | --- | --- | --- |
| US003 ユーザーログイン | 外部IdPによるOAuth2/SSO認証、JWTトークン発行、Redisキャッシュでのセッション管理 | 部分的に満足 | 満足 |
| US012 チケット選択 | 在庫予約システムと楽観的ロック、データベースコネクションプーリングを利用 | 満足 | 満足 |
| US013 決済処理 | 専用決済サービス、決済ゲートウェイアダプタパターン、セキュリティ管理とサーキットブレーカー適用 | 満足 | 満足 |
| US014 注文確定 | 分散トランザクションにSagaパターン、Outboxパターン、CQRSを適用 | 部分的に満足 | 部分的に満足 |
| US015 チケット生成 | チケット生成サービスをファクトリ／ビルダーパターンで実装、セキュリティ／リカバリ管理コンポーネントを導入 | 部分的に満足 | 部分的に満足 |
| US016 チケット配送 | 配送サービスにストラテジーパターン、障害時のリトライと通知機能を実装 | 部分的に満足 | 部分的に満足 |
| QAS001 高同時接続チケット購入 | 楽観的ロックによる衝突回避と在庫予約、コネクションプーリングによる高スループット対応 | 部分的に満足 | 部分的に満足 |
| QAS015 システム復旧 | リカバリマネージャーコンポーネント、マルチリージョン展開と自動フェイルオーバー、定期バックアップ／スナップショット | 満足せず | 満足せず |

課題も見つかりました。動作図でユーザーインターフェースがすべての処理開始点となっていましたが、実際にはイベントトリガーや定期処理も必要でした。また、復旧機能ではサービス単位での対応だけでなく全体的な復旧設計が求められるとの指摘がありました。それでもアーキテクチャ文書の完成度については高評価を得ることができ、実務で活用可能性が高いという意見も出ました。

### ADDを使わなかった場合と比較した

三つ目の実験ではADDを使わなかった場合の設計結果と比較が行われました。同じホテル料金システムの要件が使われ、ADDや反復計画を与えずに設計が依頼されました。比較のため三つの条件で実施されました。

- 要件のみが渡され設計が依頼された
- 空の設計文書テンプレートが提供され設計が依頼された
- テンプレートに簡易的な指示が添えられ設計が依頼された

結果としていずれもマイクロサービス構成とメッセージング通信が提案され、方向性は共通していましたがいくつかの課題が確認されました。

- 外部連携の方法で誤解があった
- 設計の具体性が不足していた
- 一部のコンポーネントが図に含まれていなかった

最も詳細だったのは簡易指示を添えた場合でしたが、それでもADDと反復計画を活用した設計と比較すると具体性や一貫性に差がありました。この比較を通じて、ADDと反復計画を組み合わせることでより詳細で一貫性のある設計が得られることが確認されました。また、設計プロセス中に人間による確認と修正が繰り返されることが品質向上において重要であることも示されました。

## 検証結果の妥当性をどう考えるか

検証結果を解釈するには注意が必要な点があります。

### LLMが事前に事例を学習していた可能性がある

大きな懸念の一つは、ホテル料金システムの事例がLLMの訓練データに含まれていた可能性です。この点を確認するため、LLMに「『Designing Software Architectures: A Practical Approach』第2版のホテル料金システム事例を知っているか」と質問が行われました。

回答として「具体的な詳細は持っておらず、詳細は書籍を参照してほしい」と返されました。LLMが著作権のある情報を回答しないよう訓練されている可能性もあるため完全な確認はできませんが、訓練に使用されていない可能性が高いと考えられます。また、LLMが提案した設計が書籍とは異なるアプローチを示していたことからも、事前知識への依存は低いと推測されます。

### 類似システムの事例がオンラインに存在する影響

イベントチケットシステムについては類似する事例がオンラインで公開されていることが確認されています。

- Ticketmasterのチケット予約システム設計
- オンラインチケット予約システムの事例研究
- ナンボール競技場のチケット管理システム
- Good Ticket Companyのチケッティングプラットフォーム開発

この中で最も詳細な技術情報を持つTicketmaster事例と比較したところ、LLMの提案した設計は多くの点で異なっていました。座席予約戦略、需要ピーク時の対応、検索機能の同期方式、チケット生成や配送方法、セキュリティ対策、データストア構成などで違いが確認されました。

これらの結果から、LLMは既存事例をそのまま再現するのではなく独自の設計判断を行っていると考えられます。

## 実験を通じて得られた知見

三つの実験を通じて、LLMとADDを組み合わせた設計手法について多くの知見が得られました。

### 短時間で高品質な設計文書を作成できることが示された

いずれの事例でも、作成されたアーキテクチャ文書は非常に詳細であり、実務の設計文書よりも包括的な内容となりました。

設計作業に要した時間は数時間程度であり、短時間での高品質な文書作成が可能であることが確認されました。

この手法において、LLMに明確な設計プロセスを示し、設計開始前に反復計画を立てることが大変重要です。LLMと設計者の双方が作業の全体像を把握でき、完了目標が明確になることが大事なのです。こうした準備がない場合、過度に複雑な「ビッグデザイン・アップフロント」に陥るリスクが高くなります。

### 統一された設計文書を更新し続けることの価値

設計プロセスを通じて「一つの統一文書を更新し続けること」の重要性も確認されました。

初期の実験では反復ごとに文書が分かれて管理されていましたが、この方法では設計の全体像が分断されてしまいました。  
一方、統一文書を使うことで一貫した設計が保たれるようになりました。

ただし文書が大きくなるとLLMが修正を加える際にミスが増える傾向も見られました。

### 人間による確認と修正が不可欠であることが分かった

検証ではLLM任せで設計をどこまで進められるかを確認するため、最小限の修正のみで進められました。しかし多くの問題が発生しました。

イベントチケットシステムの設計では以下の問題が確認されました。

- ドメインモデル作成時にクラウド認証サービスが考慮されなかった
- 会場管理システムがコンテナ図で無視された
- 設計途中でアーキテクチャの形式を変更しようとした
- 指摘を受けて簡易な方法へ変更する判断が行われた

またLLMが情報を忘れる問題も頻発しました。

- ADDのステップで要求される情報表示が漏れる
- ステップ終了時の一時停止が行われない
- 設計文書の更新が忘れられる
- コンテナ図の調整が忘れられる
- 設計判断の記録が抜ける
- 取り組んでいない要件の図が作成される

問題の多くは「IDEツールがLLMに渡す情報量の制約」と関係があると考えられます。この制約下で作業を進める必要がある点も示されました。

### 現時点で完全自動化は難しい

要件だけを渡して設計を自動的に完成させる方法は、現時点のLLMでは現実的でないことが示唆されました。設計は複雑な作業であり、完全自動化には限界があります。

しかし設計者とLLMが協働することで設計プロセスを大幅に効率化することはできます。

今回の実験では、高品質な文書を作成できる可能性が示されました。とはいえLLMの提案を確認・修正できる経験を持つ設計者の関与は不可欠です。経験の浅い設計者がLLMの提案を無批判に受け入れると、リスクや技術的負債を抱える可能性があります。

またLLMは誤った情報を生成することもあるため、生成された内容の確認は必ず必要です。

それでも、LLMを完全に信頼するのではなくパートナーとして活用することで、設計作業の効率化と高品質な文書作成の両立が実現できる可能性が示されています。

## まとめ

本記事では、LLMとADDを組み合わせてソフトウェア設計を支援する方法を取り上げました。

実際のシステムを題材に試した結果、短時間で詳細な設計文書を作れることが示されています。ただ、LLMだけに任せると誤りや抜けが出ることも分かり、人の確認や調整が欠かせませんでした。

こういった手法を使うと、設計の負担を減らしながら、一定の質を保つ設計が進められる可能性があります。設計をもっと効率的に進めたいと感じている方は、自分のプロジェクトで試す場面を考えてみると良いかもしれません。

**参照文献情報**

- タイトル：An LLM-assisted approach to designing software architectures using ADD
- URL： [https://doi.org/10.48550/arXiv.2506.22688](https://doi.org/10.48550/arXiv.2506.22688)
- 著者：Humberto Cervantes, Rick Kazman, Yuanfang Cai
- 所属：Universidad Autónoma Metropolitana, University of Hawaii at Manoa, Drexel University

**■サポートのお願い  
**AIDBを便利だと思っていただけた方に、任意の金額でサポートしていただけますと幸いです。  

  

[AIは何を感じ 何を選び どこまで自分を形づくるのか](https://ai-data-base.com/archives/91979)

[特許情報をもとにLLMで製品アイデアを生み出す方法](https://ai-data-base.com/archives/92000)

 [![](https://ai-data-base.com/wp-content/themes/innovate_hack_tcd025/img/footer/return_top.png) PAGE TOP](https://ai-data-base.com/archives/#header_top)