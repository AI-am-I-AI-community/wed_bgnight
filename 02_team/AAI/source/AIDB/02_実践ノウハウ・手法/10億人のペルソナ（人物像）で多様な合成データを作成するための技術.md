---
title: "10億人のペルソナ（人物像）で多様な合成データを作成するための技術"
source: "https://ai-data-base.com/archives/72498"
author:
  - "[[AIDB Research]]"
published: 2024-07-10
created: 2025-06-13
description: "本記事ではペルソナ駆動型データ合成手法を紹介します。数学問題、論理的思考問題、指示、知識豊富なテキストなど、様々な分野で影響を与えるかもしれません。"
tags:
  - "clippings"
---
**【お知らせ】** AIDB主催のビジネスマッチングイベントを7月25日(金)開催予定です！  
  

\---以下、記事本文---

本記事ではペルソナ駆動型データ合成手法を紹介します。数学問題、論理的思考問題、指示、知識豊富なテキストなど、様々な分野で影響を与えるかもしれません。

10億の多様なペルソナを活用し、合成データの大規模な作成を行うPersona Hub（ペルソナハブ）に関するテクニカルレポートをもとに説明します。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498-1024x576.jpg)

**参照論文（テクニカルレポート）情報**

- タイトル：Scaling Synthetic Data Creation with 1,000,000,000 Personas
- 著者：Xin Chan, Xiaoyang Wang, Dian Yu, Haitao Mi, Dong Yu
- 所属：Tencent

**本記事の関連研究**

- [LLMは与えられたペルソナ（役割）に応じてバイアスが変化することが明らかに](https://ai-data-base.com/archives/70696)
- [LLMの価値観は一貫しているのか？](https://ai-data-base.com/archives/72401)
- [LLMの個別の性格（人格）特性を、プロンプトで「測定」「形成」する手法](https://ai-data-base.com/archives/55413)
- [タスクに応じてロールプレイさせるとChatGPTなどLLMの推論能力は普遍的に向上する](https://ai-data-base.com/archives/54536)

## 背景

LLMの開発や研究において、合成データの重要性が高まっています。必要なデータ量を効率的に確保すること、エッジケースに対応すること、プライバシーに配慮することなどが目的です。

しかし、大量の合成データを作成する際には、その多様性を確保することが課題となっています。

これまでの合成データ作成手法には主に2つのアプローチがあります。  
1つ目は、既存のデータセットを基にして新しいインスタンスを作り出す「インスタンス駆動型」アプローチ。2つ目は、重要なポイントや概念のリストを用いて合成データを多様化させる「キーポイント駆動型」アプローチです。  
しかし、上記の手法では合成データの作成を大規模に行うことが難しいという問題があります。

そこで今回新たに「ペルソナ駆動型」データ合成手法が考案されました。LLMに特定のペルソナ（人物像）を与えることで、そのペルソナの視点から多様な合成データを生成する手法です。

そして手法を実現するために「Persona Hub」と呼ばれる10億の多様なペルソナのコレクションが構築されました。多くの視点や知識にアクセスして大規模なデータを作成します。

本アプローチで数学の問題、論理的思考問題、ユーザーインストラクションプロンプト、知識豊富なテキスト、ゲームのNPC、ツール(関数)開発など、様々なシナリオでの合成データ作成が容易になると実験で示されました。

以下で詳しく紹介します。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_4-1024x521.jpg)

ペルソナを用いて様々なデータ合成プロンプトでLLMに指示し、10億のペルソナから10億の合成インスタンスを作成するプロセスを示す

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_5-1024x348.png)

Persona Hubを世界知識の圧縮形式として、公開Webテキストを分散キャリアに圧縮し、再び展開するイメージ

## Persona Hubの構築方法

大規模なウェブデータから多様なペルソナを抽出するために2つのスケーラブルなアプローチが提案されました。

### （１）テキストからペルソナへの変換

特定のテキストを読む、書く、好む、または嫌う可能性が高い人物のペルソナを推測します。ウェブ上のテキストデータは事実上無限かつ包括的であるため、LLMにこれらのテキストを与えることで、幅広いペルソナのコレクションが得られます。

ペルソナの表現形式は、プレーンテキストや構造化テキストなど、プロンプト内で制御します。また、出力されるペルソナの記述の粒度も調整します。例えば、「コンピューター科学者」という粗い粒度のペルソナから、「 [ニューラルネットワーク](https://ai-data-base.com/archives/26117 "ニューラルネットワーク") [アーキテクチャ](https://ai-data-base.com/archives/26562 "アーキテクチャ") と注意機構に焦点を当てた機械学習研究者」といった細かい粒度のペルソナまで生成します。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_6-1024x389.png)

テキストからペルソナへの変換アプローチを示す図。任意のテキストを入力としてLLMにプロンプトを与え、対応するペルソナを得る過程

入力テキストに多くの詳細な要素が含まれている場合（例：数学の教科書や超伝導に関する学術論文）、結果として得られるペルソナの記述も具体的で細かい粒度になる傾向があります。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_7-1024x450.png)

入力テキストに詳細な要素が含まれる場合、結果として得られるペルソナの記述も具体的で細かい粒度になる

### （２）ペルソナからペルソナへの変換

「テキストからペルソナへの変換」で得られたペルソナから、人間関係を持つ新たなペルソナを導き出します。

例えば、小児病院の看護師のペルソナから、患者-介護者の関係性を通じて「子供」のペルソナが導き出されます。同様に、シェルターワーカーのペルソナから援助関係を通じて「ホームレス」のペルソナが、映画の主演俳優のペルソナから共同作業者の関係を通じて「映画の舞台裏スタッフ」のペルソナが導き出されます。

理論に基づき、「テキストからペルソナへの変換」で得られた各ペルソナに対して6回の反復的な関係拡張が行われ、ペルソナのコレクションがさらに豊かになりました。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_8-1024x386.png)

ペルソナからペルソナへの変換アプローチを示す図。与えられたペルソナと密接な関係にある人物を推論するようLLMにプロンプトを与える過程

### 重複排除プロセス

数十億のペルソナを生成した後、重複や非常に類似したペルソナを排除するために、2段階の重複排除プロセスが実施されました。

（１）MinHashベースの重複排除  
まず、ペルソナの記述文から重複を見つけ出す方法として、MinHashという技術が使われました。  
文章の中の単語の並びを比較して似ているものを見つけます。ペルソナの記述は短いので、単語ひとつずつを比較の単位として使いました。そして、似ている度合いが90%以上のものを重複として取り除きました。

（２）埋め込みベースの重複排除  
次に、文章の意味まで考慮した重複排除を行いました。  
埋め込みモデルを使って各ペルソナの記述を数値の並び（これを埋め込みまたはベクトルと呼びます）に変換しました。そして、これらの数値の並びを比較して、90%以上似ているものを重複として除外しました。すると、表現は違うけれど意味が同じようなペルソナを見つけ出すことができました。

また、必要に応じて、ペルソナの選び方をさらに厳しくすることもできます。例えば、たくさんのペルソナは必要ないけれど、できるだけ違うタイプのペルソナが欲しい場合を考えてみましょう。この場合、「似ている度合い」の基準を50%まで下げることができます。つまり、50%以上似ているペルソナは取り除いてしまうのです。

すると数は少なくなりますが、より多様なペルソナの集まりを作ることができます。このように、目的に応じて「似ている度合い」の基準を変えることで、ペルソナの数と多様性のバランスを調整できるのです。

上記のような重複排除と簡単なヒューリスティック手法を用いた低品質なペルソナ記述のフィルタリングを経て、最終的に1,015,863,523個のペルソナが収集され、Persona Hubが完成しました。

## ペルソナ駆動型合成データ作成法

研究者たちの「ペルソナを使ってデータを作る」方法はとてもシンプルですが、驚くほど効果的です。

LLMに「データを作ってください」とお願いする時に、「あなたは○○という人です」という設定（これを「ペルソナ」と呼びます）を加えます。一見すると小さな変更ですが、これによってLLMは「○○という人の目線で」データを作るようになります。

Persona Hubを使えば、10億通りの異なる視点からデータを作ることができます。つまり、大量の多様なデータを簡単に作れるようになったのです。

### プロンプティング手法

ペルソナ駆動型手法は柔軟性が高く、様々な形式のプロンプトと互換性があります。以下の3つのプロンプティング手法との連携が挙げられています。

（１）ゼロショットプロンプティング

この手法では、既存の例（デモンストレーション）が活用されません。そのため、特定の例に制約されることなく、モデルの創造性が最大限に発揮されます。

（２）フューショットプロンプティング

いくつかのデモンストレーションを提供することで、合成されるデータが要件を満たすことをより確実にする手法です。

（３）ペルソナ強化フューショットプロンプティング

LLMのペルソナ駆動型データ合成能力を更に向上させる効果的な手法です。ただし、フューショットプロンプト内の各デモンストレーションに対応するペルソナを事前に導出する必要があるという欠点があります。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_9-1024x586.png)

ゼロショット、フューショット、ペルソナ強化フューショットの3つのプロンプト手法

### ペルソナを使ったデータ作りの特徴と使い方

本手法は、とても便利で様々な場面で使えます。LLM指示を出す時に少し言葉を変えるだけで、複雑な使い方もできます。

例えば、LLMに数学の問題を作ってもらう時を考えてみましょう。「あなたは言語学者です」という設定を加えると、LLMは言葉に関係する数学の問題を作ります。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_10-1024x510.png)

言語学者のペルソナを用いて異なる数学問題作成プロンプトを使用した例

また、この方法は融通が利きます。「幾何学の問題を作って」や「オリンピックレベルの難しい問題を作って」といった細かい指示も簡単に加えられます。

数学の先生の設定を使うと、より難しくて専門的な問題が作られます。数学の先生の設定には高度な数学の知識が含まれているからです。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_11-1024x449.png)

数学に関連する専門家のペルソナを用いて作成された数学問題の例

このように、ペルソナを使ったデータ作りは、柔軟で使いやすいのが特徴です。10億もの異なる設定（ペルソナ）を使えば、大量の多様なデータを作ることができます。

## Persona Hubの活用事例

今回、Persona Hubの活用方法が様々な分野で示されました。

### （１）数学問題の生成

1.09百万のペルソナがPersona Hubから選択され、GPT-4を用いてゼロショットプロンプティング方式で数学問題が生成されました。MATHなどのベンチマークからのインスタンスは一切使用されませんでした。問題の解答はgpt-4o（アシスタント）によって生成されました。

生成された1.09百万の数学問題のうち、20,000問がランダムに選ばれ、合成テストセットとして評価に使用されました。残りの1.07百万問が訓練に使用されました。

評価には以下の2つのテストセットが使用されました。

1. 合成テストセット（インディストリビューション）  
	20,000問のうち、少なくとも2つの解法が一致する11,600問が最終的なテストセットとして採用されました。
2. MATH（アウトオブディストリビューション）  
	広く認知された数学的推論能力テストのベンチマークで、5,000問の競技レベルの数学問題が含まれています。

合成テストセットでの評価では、Persona Hubを用いて訓練されたモデルが約80%の精度を達成し、オープンソースのLLMを上回る結果を示しました。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_12-1024x567.png)

11.6Kの合成テストインスタンスに対するin-distribution評価結果

MATHテストセットでの評価では、7Bパラメータのモデルが64.9%の精度を達成し、gpt-4-turbo-previewに匹敵する性能を示しました。これは、アウトオブディストリビューション評価設定において、特に印象的な結果と言えます。

生成された数学問題の品質も専門家によって評価され、96.5%の高い有効性が確認されました。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_13-1024x570.png)

MATHベンチマークに対するout-of-distribution評価結果

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_14.png)

トレーニングに使用する合成インスタンス数を増やした場合のMATHでの精度の変化を示すグラフ

また、ペルソナの類似性と生成された数学問題の類似性の関係が調査されました。結果、生成された数学問題の意味的類似性は、対応するペルソナの類似性と相関関係にあるものの、通常はそれより低いことが分かりました。このことから、Persona Hubを使用することで、10億規模でも合成データの多様性が確保されると考えられます。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_15-1024x319.png)

異なる類似度を持つペルソナで作成された数学問題の類似度

### （２）論理的思考問題の生成

数学問題と同様に、論理的思考問題も容易に生成できることが示されました。典型的な論理的思考問題や、中国のネットユーザーによって投稿される「若者吧スタイル」の問題も、ペルソナ駆動型手法で生成可能でした。

※若者吧スタイルとは、新しい言葉を多用し、ユーモアと皮肉が交えられる言語の文化です。日本語や英語でも似たような現象はあると考えられます。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_16-1024x651.png)

提案されたペルソナ駆動型手法で作成された典型的な論理的推論問題の例

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_17-1024x453.png)

様々なペルソナを用いて作成された「若者吧スタイル」の論理的推論問題の例

### （３）指示（ユーザープロンプト）の生成

Persona Hubは、多様なユーザーの特性を模倣し、LLMへの一般的な要求を理解するために活用できるため、様々な指示（ユーザープロンプト）も生成できました。

ここで言う「指示」は、ユーザーとLLMの会話の最初の部分を指します。LLMを使って続きの会話を生成することで、多数の仮想的なユーザーLLM対話が作成できます。これはLLMの指示理解能力と会話能力の向上に役立ちます。さらに、Persona Hubから2つのペルソナを選び、LLMに両方の役を演じさせることで、実際の人物同士の会話を模擬することも可能です。

指示生成には、主に2つのプロンプト手法が使用されました。

1. ゼロショットプロンプティング  
	既存のデータに頼らず、多様なペルソナを基に新しい指示を生成します。
2. ペルソナ強化フューショットプロンプティング：  
	既存の指示データ（例：WildChat）から例を選び、それらに関連するペルソナを推測します。複雑ですが、実際のユーザーの指示に近いものを生成できます。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_18-1024x701.png)

指示（ユーザープロンプト）を作成するために使用される2つの典型的なプロンプト

### （４）知識豊富なテキストの生成

Persona Hubは、LLMの事前学習や事後学習に役立つ知識豊富なテキストの生成にも活用可能です。

例えばPersona Hubから [サンプリング](https://ai-data-base.com/archives/26518 "サンプリング") されたペルソナを用いて、LLMにQuora風の記事を書かせることができます。LLMの対応する知識と視点が引き出され、非常に情報量の多い知識豊富なコンテンツが生成されます。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_19-1024x604.jpg)

ペルソナを用いた知識豊富なテキスト合成の例

### （５）ゲームNPCの生成

実用的な例として、ゲーム用の多様なNPC（ノンプレイヤーキャラクター）の大規模生成が挙げられます。ゲームの背景や世界観情報をLLMに提供することで、Persona Hub内のペルソナ（通常は現実世界のペルソナ）をゲーム世界内のキャラクターに投影することができます。ゲーム設計プロセスにおけるNPCのブレインストーミングに必要な労力が大幅に削減可能です。

例えば、「World of Warcraft」や「Moonlight Blade（天涯明月刀）」などのゲームで、様々なペルソナを用いてユニークなNPCを生成できることが示されました。ゲームの設定に合わせて適切に調整され、プレイヤーとの相互作用やゲーム内でのロールなど、詳細な背景情報が付与されています。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_20-1024x583.jpg)

Persona Hubのペルソナを用いて「World of Warcraft」ゲーム用のNPCを作成する例

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_21-1024x553.jpg)

Persona Hubのペルソナを用いて「Moonlight Blade（天涯明月刀）」ゲーム用のNPCを作成する例

### （６）ツール（関数）開発

Persona Hubは、ユーザーが必要とするツール（機能）を予測するのにも使用可能です。あらかじめツールを準備しておくことで、実際のユーザーから似たような要求があった場合、LLMはすぐにそのツールを使って結果を返すことができます。

例えば、

1. タクシー運転手の設定から、交通状況を確認するツール
2. 言語学の退職教授の設定から、テキスト翻訳ツール
3. 海洋生物写真家の設定から、画像内の生物種を識別するツール

これらLLM自体が直接扱えない機能をツールとして提供することで、LLMができることが大幅に増えます。

インターフェース定義のみでも、容易にコード実装に変換することができます。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_22-1024x444.png)

Persona Hubを用いたツール（関数）作成の例

以下に種識別インターフェースのコード実装例が示されています。

![](https://ai-data-base.com/wp-content/uploads/2024/07/AIDB_72498_23-1024x964.png)

種識別インターフェースのコード実装例

## 本技術のインパクトと懸念

### インパクト

通常、LLMはデータ処理に適しているものの新規データ作成には不向きとされてきました。そのため、人間がデータを作成し、LLMがそれを処理するという協力モデルが一般的でした。

しかし、今回のペルソナ駆動型手法の提案により、LLMが多様な視点から新しいデータを作成できる可能性が示されました。現時点でLLMは人間を完全に代替できませんが、将来的にはデータ作成を担う可能性があります。

Persona Hubの10億のペルソナを用いて、ユーザーのニーズや行動のシミュレーションが可能になると考えられています。企業の新製品反応予測や、政府の政策影響予測などへの応用が検討されています。

さらに、Persona HubはLLMの包括的な知識へのアクセスを提供する可能性があります。

ただし、現段階では技術的制限があり、完全な実用化にはさらなる研究が必要です。将来的には、LLMの知識をより効果的に抽出できる可能性がありますが、その実現には課題が残されています。

### 懸念

Persona Hubの技術には、いくつか懸念事項が指摘されています。一つは、トレーニングデータのセキュリティです。この技術を使用すると、対象となるLLMのトレーニングデータを間接的に抽出できる可能性があります。LLMの知的財産権に関わる問題を引き起こす恐れがあります。

また、この技術を用いて多様なユーザーの要求を模倣し、LLMに大規模なクエリを行うことで、LLMの知識や能力を複製できるリスクも指摘されています。

さらに、Persona Hubによって生成される合成データは、誤情報やフェイクニュースの問題を悪化させる可能性があります。多様なペルソナによって生成されるテキストは、人間が書いたものと区別が難しくなる可能性があるためです。

上記の懸念は、技術の発展と並行して慎重に検討され、適切な対策が講じられる必要があります。

## まとめ

本記事では、ペルソナ駆動型データ合成手法とPersona Hubの研究を紹介しました。10億の多様なペルソナを活用して、様々なシナリオでの合成データ作成をスケールアップする手法です。

なお今後、ペルソナの記述の詳細化、マルチモーダルLLMへの適用、既存知識を超えた探索の促進などが計画されています。

- 参照論文URL： [https://arxiv.org/abs/2406.20094](https://arxiv.org/abs/2406.20094)
- GitHub： [https://github.com/tencent-ailab/persona-hub](https://github.com/tencent-ailab/persona-hub)

**■サポートのお願い  
**AIDBを便利だと思っていただけた方に、任意の金額でサポートしていただけますと幸いです。  

  

[LLMの価値観は一貫しているのか？](https://ai-data-base.com/archives/72401)

[複数LLM協調アプローチ「マージング」「アンサンブル」「協力」について](https://ai-data-base.com/archives/72609)

 [![](https://ai-data-base.com/wp-content/themes/innovate_hack_tcd025/img/footer/return_top.png) PAGE TOP](https://ai-data-base.com/archives/#header_top)