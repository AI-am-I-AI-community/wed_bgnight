---
title: "プレイヤーの行動に応じてゲームを自動生成する技術 Googleなどが開発"
source: "https://ai-data-base.com/archives/77790"
author:
  - "[[AIDB Research]]"
published: 2024-10-31
created: 2025-06-13
description: "本記事では、Googleが開発したゲーム生成システム「UNBOUNDED」を紹介します。"
tags:
  - "clippings"
---
**【お知らせ】** AIDB主催のビジネスマッチングイベントを7月25日(金)開催予定です！  
  

\---以下、記事本文---

本記事では、Googleが開発したゲーム生成システム「UNBOUNDED」を紹介します。本システムはLLMと画像生成モデルを組み合わせることで、プレイヤーとシステムが共に物語を紡いでいくという新しいゲーム体験を目指しており意欲的な試みと言えます。

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_top2-1024x576.jpg)

**参照論文情報**

- タイトル：Unbounded: A Generative Infinite Game of Character Life Simulation
- 著者：Jialu Li, Yuanzhen Li, Neal Wadhwa, Yael Pritch, David E. Jacobs, Michael Rubinstein, Mohit Bansal, Nataniel Ruiz
- 所属：Google, The University of North Carolina at Chapel Hill

**本記事の関連研究**

- [Among UsのようなゲームでLLMエージェントはどれほど活躍できるか](https://ai-data-base.com/archives/71915)
- [「ゲームでのLLM」における調査結果　プレイヤー・NPC・ゲームマスターなど様々な役割を網羅的に整理](https://ai-data-base.com/archives/66372)
- [ポーカーなど不完全情報ゲームを「心の理論」で上手にプレイするGPT-4ベースの『Suspicion（疑心）-Agent』松尾研など開発](https://ai-data-base.com/archives/56141)
- [GPT-4などのLLMをエージェントとして既存ゲームシステムに導入し、NPCをAI化するツール『MindAgent』登場](https://ai-data-base.com/archives/55563)

## 背景

これまでのゲームには言うなれば限界がありました。取れる行動があらかじめ決められており、ゲームの終わり方も固定されていました。また、画面に表示されるグラフィックスも、事前に用意されたものしか使用できませんでした。

しかし近年、AI技術が飛躍的に進歩し、ゲームの可能性が大きく広がってきました。中でも重要なのがLLMの進化です。LLMによってゲームの進行をリアルタイムで生成できるようになり、キャラクターとの自然な対話が可能になりました。さらにプレイヤーの行動に応じて、柔軟にストーリーを展開できるようになりました。

また、画像生成AIの進化も重要な要素です。ゲーム中の画像をその場で生成でき、キャラクターや背景を自由に作り出すことが可能になりました。

このような技術革新を活かして、今回Googleなどの研究チームは「UNBOUNDED」という新しいタイプのゲームを開発しました。プレイヤーが自由にキャラクターを作成でき、そのキャラクターと自然な会話で交流することができるシステムです。キャラクターの行動や物語は自由に展開し、約1秒という速さで新しい画像が生成されます。

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_1-1024x516.jpg)

UNBOUNDEDのデモ画面。Archibusという魔法使いキャラクターの生活を追跡し、自然言語での相互作用やステータス（空腹度等）の変化を示している

従来の「決められたレールの上を進む」ようなゲームから、大きく一歩を踏み出すものです。プレイヤーとAIが共に物語を紡いでいくという、まったく新しいタイプのゲーム体験を目指しています。たとえばデジタルペットゲーム（たまごっち等）やシミュレーションゲーム（シムズ等）の魅力を継承しながら、テーブルトークRPGのような自由度の高い物語展開を実現しようとしている意欲的な試みです。

以下で詳しく見ていきましょう。

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_2-1024x720.jpg)

UNBOUNDEDのゲームフロー。キャラクター設定から環境生成、ユーザー入力による行動生成までの流れを図示

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_3.jpg)

様々なキャラクター（魔女、魔法使い、子犬、猫、パンダ）が異なる環境で活動する生成例を示す

## 研究アプローチ

「UNBOUNDED」の開発内容について見ていきます。

### システムの基本構造

以下の4つの主要な技術的要素が実装されました。

まず、カスタマイズ可能なキャラクター生成システムが構築されました。ユーザーが定義したキャラクターの特徴が一貫して保持されるよう設計されています。

次に、AIによって動的に生成されるゲーム世界が実装されました。キャラクターが自由に探索可能な環境が提供されます。

第三の要素として、自然言語による制約のないインタラクションシステムが導入されました。プレイヤーの行動に応じて新しいシナリオやストーリーが動的に生成されます。

最後に、約1秒での更新を実現するリアルタイム生成システムが実装されました。

### 「キャラクター生成」の技術基盤

キャラクターの一貫性を保持するための基盤技術としては、潜在一貫性モデル（LCM）が採用されました。2ステップという少ない処理で高解像度画像の生成が可能になったと報告されています。

この基盤技術に加えて、DreamBoothと呼ばれる技術がキャラクターの個性維持のために実装されました。LoRAモジュールを用いたこの手法では、\[V\]という特殊な識別子によってキャラクターの特徴が認識される仕組みが採用されています。

### 環境の一貫性を保つための技術的アプローチ

UNBOUNDEDの大きな技術的課題の一つとして、「キャラクターを様々な環境に自然に配置すること」があったと挙げられています。研究チームは、ユーザーの指示に基づいてキャラクターに行動をさせる際、環境の一貫性とキャラクターの特徴の両方を維持する必要性に直面しました。

従来の手法では、インタラクティブな速度を保ちながら全ての要件を満たすことが困難でした。そこで研究チームは、キャラクターを事前に定義された環境に自然に配置するための新しい手法として、「Regional IP-Adapter」を開発したと報告しています。

#### Regional IP-Adapterの仕組み

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_4.jpg)

画像生成の全体フレームワーク、動的マスク生成、Regional IP-Adapterの技術的詳細を示す

Regional IP-Adapterは、キャラクターと背景を別々に、しかし調和的に生成するために開発された技術です。たとえば「砂漠でサボテンに魔法をかける魔女」という指示を受けた場合、システムは砂漠という背景の特徴を保ちながら、魔女の見た目の一貫性も維持する必要があります。

このため、モデルの中で「注意（アテンション）」と呼ばれる仕組みが実装されました。これは人間が視覚的に何かに注目するのと似た仕組みで、画像のどの部分がキャラクターで、どの部分が背景なのかを区別します。この処理は数学的な計算式で実現されていますが、本質的にはキャラクターと背景の特徴を適切にブレンドする働きをしています。

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_5.png)

キャラクター埋め込みと隠れ層間の注意マップを異なるブロックで比較

研究チームは、画像生成の過程でさらに興味深い発見をしました。画像は最初は粗い解像度で生成され、徐々に細部が作り込まれていきますが、この過程の初期段階では、モデルは画像全体の構図を重視することが分かりました。

これは人間が絵を描く過程に似ています。画家が最初に全体的な構図を決め、その後で細部を描き込んでいくように、モデルも最初は全体的なレイアウトを決定し、その後でキャラクターや背景の詳細を生成します。

この知見を活かし、Regional IP-Adapterは画像生成の後半段階でのみ使用されるよう設計されました。そうすることで、キャラクターと背景の調和の取れた配置が可能になり、より自然な画像生成が実現されました。

### LLMによるゲームエンジン

UNBOUNDEDでは、事前に定義された環境の中でキャラクターの行動をシミュレートし、その様子を画像として生成する必要があります。同時に、キャラクターの状態を監視し、プレイヤーが自然言語で行う幅広い指示に対応することも求められます。そこで研究チームは、これらの複雑な要件に対処するための言語モデルベースのゲームエンジンを開発しました。

研究チームは、以下の4つの主要な課題に直面したと報告しています。

- 自然言語による指示に基づいて、キャラクターを適切な環境に配置すること
- ユーザーが指定したキャラクターの特徴に沿った、筋の通った物語や応答を生成すること
- 空腹度、体力、満足度、衛生状態といったキャラクターの状態を監視し、ユーザーの行動や物語の展開に応じて適切に更新する仕組み
- 生成された物語を画像生成モデル用の指示文に変換する処理

GPT-4などのLLMに詳細な指示を与えることで、これらの課題に対応できることが判明しました。しかし、大規模なモデルは処理に時間がかかるため（7Bモデルで1応答に約5秒）、ゲームエンジンとしての実用は困難です。

そこで研究チームは、Gemma-2B（Googleが開発した比較的小規模な言語モデル）をベースとした小規模なモデルに、大規模モデルの能力を蒸留する手法を開発しました。蒸留とは、大規模なモデルの能力を、より小規模なモデルに効率的に移転する技術です。

この過程で、以下の2つの重要な工夫がなされています。

1. 世界のモデリングとユーザー対話をそれぞれ制御する2つの大規模言語モデルを使用したキャラクターライフシミュレーションゲームの設計
2. インタラクティブな速度で動作する1つの小規模言語モデルに蒸留するためのフレームワークの開発

#### マルチエージェント体制の構築

UNBOUNDEDでは、2つのLLMが協力してゲームを動かしています。1つ目は「世界シミュレーションモデル」と呼ばれ、ゲーム環境の設定や物語の生成、キャラクターの状態管理、行動のシミュレーションを担当します。2つ目は「ユーザーモデル」と呼ばれ、プレイヤーとゲーム世界との対話を仲介します。

なおユーザーモデルには3種類の対話パターンが実装されました。

- 現在の環境での物語の続きを展開する
- キャラクターを別の環境に移動させる
- キャラクターの状態（体力や満足度など）を管理するための対話

#### 「蒸留」技術の開発

こちらは大きく2つのステップで行われました。

まず、多様なトピックとキャラクターのデータを収集します。大規模AIに様々なトピックとキャラクターの組み合わせを生成させ、類似度チェックを行って十分に異なる5,000組のデータを作成します。

次に、世界シミュレーションモデルとユーザーモデルの対話データを収集します。トピックとキャラクターの組み合わせごとに、5回のやり取りを行い、合計5,000の対話例を生成します。

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_6.png)

ユーザーシミュレーションデータ収集プロセスの概要。トピック収集とユーザーシミュレーションデータ収集の2段階を示す

収集したデータを使って、Gemma-2Bの学習が行われました。学習時には、ユーザーの入力部分を除外し、世界シミュレーションモデルの応答パターンのみを学習するよう工夫されています。

## 性能評価実験

今回、システムの評価は技術的な観点で定量的な分析のみが行われており、ゲームの面白さなどの訂正的な分析は今回行われていない点に注意が必要です。

### 画像生成性能の検証

研究チームは、UNBOUNDEDの画像生成機能を体系的に評価するため、5,000組の評価データセットを作成しました。このデータセットには、5種類のキャラクター（犬、猫、パンダ、魔女、魔法使い）と100種類の多様な環境が含まれ、各環境につき10種類の異なる指示文が用意されました。

画像生成の性能は、以下の3つの観点から評価されました。

- 生成された画像が指定された環境の特徴をどれだけ保持しているか
- キャラクターの外見がどれだけ一貫して保たれているか
- 生成された画像が指示文の内容をどれだけ正確に反映しているか

評価には、CLIP-I、DINO、DreamSimといった画像類似度を測定する技術が活用されました。さらに、キャラクターが画像内に適切に描かれているかを確認するため、Grounding-DINOという物体検出技術も使用されています。

### 言語モデルの性能評価

言語モデルの評価では、100組のユーザーとシステムの対話サンプルが作成されました。各サンプルは5回のやり取りで構成され、GPT-4が評価者として起用されました。

評価は以下の4つの観点から10点満点で行われました。

- キャラクターの状態更新の正確さ
- 環境との関連性
- 物語の一貫性
- ユーザーの指示への追従性

### 実装の詳細

画像生成システムは、SDXLをベースに構築されました。キャラクターの特徴を学習させる処理（DreamBooth LoRA）は、A100 [GPU](https://ai-data-base.com/archives/26570 "GPU") を使用して約30分で完了します。キャラクターを示す特別な記号として”sks”が使用されました。

言語モデルは、前述の通りGemma-2Bをベースに構築されました。5,000の対話サンプルを使用して、4台のA100 [GPU](https://ai-data-base.com/archives/26570 "GPU") で6,500ステップの学習が行われました。学習率は0.0001に設定され、コサインアニーリングと呼ばれる手法で調整されました。

## 実験結果

### 環境とキャラクターの一貫性

研究チームは、まず従来手法とRegional IP-Adapterを比較した結果を報告しています。定量的な評価では、環境の一貫性とキャラクターの一貫性の両方において、新手法が優位性を示しました。中でも、StoryDiffusionと比較して、キャラクターの一貫性を示すCLIP-Iスコアで0.047ポイント、環境の一貫性では0.035ポイントの改善が確認されました。

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_7-1024x150.png)

環境とキャラクターの一貫性維持における性能比較を示す表

画質の具体的な改善点として以下が挙げられています。

- キャラクターが画像から消失する問題が解決
- キャラクターの外見の一貫性が向上
- 背景環境の特徴がより正確に保持

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_8.jpg)

環境と文章プロンプトに基づくキャラクター生成において、他手法との比較結果を示す

### Regional IP-Adapterの効果検証

新技術の各要素について詳細な検証が行われました。注目すべき発見として、環境の条件付けの強さを0.5に設定した場合、キャラクターの一貫性が向上する一方で、環境の一貫性がわずかに低下することが判明しました。

また、動的マスクと呼ばれる技術の導入により、以下の改善が確認されました。

- キャラクターと背景の干渉が軽減
- テキスト指示に基づく適切な空間配置の実現
- 背景とキャラクターのバランスの改善

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_9-1024x215.png)

提案手法の各コンポーネントの有効性を示すアブレーション実験の結果

### 言語モデルの性能評価

蒸留された小規模言語モデルの性能評価では、興味深い結果が得られました。Gemma-2B、Gemma-7B、Llama3.2-3Bなど、既存の小規模モデルと比較して、新たに開発されたモデルは全ての評価項目で高いスコアを獲得しました。

特筆すべき点として、GPT-4とほぼ同等の性能を示しながら、応答速度が大幅に改善されたことが挙げられます。具体的な評価結果は以下の通りです。

- ベースのGemma-2Bと比較して、全体スコアが6.22から7.44に向上
- キャラクターの状態更新の正確さが5.60から7.47に改善
- 環境との関連性が6.12から7.94に向上
- 物語の一貫性が6.34から7.57に改善
- ユーザーの指示への追従性が6.43から7.67に向上

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_10-1024x477.jpg)

提案手法のRegional IP-Adapterとベースライン手法との比較を示す

![](https://ai-data-base.com/wp-content/uploads/2024/10/AIDB_77790_11.png)

特殊化されたLLMの蒸留の効果を示す、UNBOUNDEDと異なるLLMとの性能比較結果

### 学習データ量の影響

なお、研究チームは学習データ量の影響も検証しました。1,000サンプルで学習したモデルと5,000サンプルで学習したモデルを比較したところ、データ量の増加に伴い全ての評価指標で改善が見られました。この結果は、さらなるデータ収集によって性能向上の余地があることを示唆しています。

## まとめ

本記事では、生成AIを活用したゲームシステム「UNBOUNDED」の研究を紹介しました。小規模LLMと画像生成モデルを組み合わせることで、プレイヤーの想像力を制限しない「無限」のゲーム体験の実現を目指しています。約1秒での新規シーン生成や、キャラクターの一貫性維持に成功しており、生成AIを活用した新しいエンターテインメントの可能性を示唆しています。

本実験は主に技術的な観点からの評価、つまり「画像生成の一貫性」「環境やキャラクターの再現性」「指示に対する応答精度」などの定量的な分析に重点が置かれています。これらはすべてゲームの技術的性能を測定する指標ですが、ゲーム体験そのものの「面白さ」や「ユーザー満足度」に関する定性的な評価は含まれていません。

「面白さ」や「楽しさ」についての評価を行うためには、実際のユーザーからのフィードバックや、ゲームプレイにおける心理的な反応を測定するアンケートやインタビューが必要です。現時点ではそのような取り組みはまだ行われていないようです。今後の展開が期待されます。

- 参照論文URL： [https://arxiv.org/abs/2410.18975](https://arxiv.org/abs/2410.18975)
- プロジェクトページ： [https://generative-infinite-game.github.io/](https://generative-infinite-game.github.io/)

**■サポートのお願い  
**AIDBを便利だと思っていただけた方に、任意の金額でサポートしていただけますと幸いです。  

  

[手の込んだ手法よりシンプルな手法の方がLLMは幻覚を起こしにくい　問題に応じて戦略を変える必要性](https://ai-data-base.com/archives/77700)

[LLMに対するオープンソース安全性評価ツールの比較](https://ai-data-base.com/archives/77301)

 [![](https://ai-data-base.com/wp-content/themes/innovate_hack_tcd025/img/footer/return_top.png) PAGE TOP](https://ai-data-base.com/archives/#header_top)