---
title: "LLMを活用した「Text to CAD」 テキスト指示から高品質な3Dモデルを作成する"
source: "https://ai-data-base.com/archives/83475"
author:
  - "[[AIDB Research]]"
published: 2025-02-06
created: 2025-06-13
description: "本記事では、自然言語の指示からCADモデルを自動生成する新しい研究を紹介します。CAD（コンピューター支援設計）は産業界で不可欠なツールですが、モデル作成には専門知識と多大な労力が必要とされています。"
tags:
  - "clippings"
---
**【お知らせ】** AIDB主催のビジネスマッチングイベントを7月25日(金)開催予定です！  
  

\---以下、記事本文---

本記事では、自然言語の指示からCADモデルを自動生成する新しい研究を紹介します。

CAD（コンピューター支援設計）は産業界で不可欠なツールですが、モデル作成には専門知識と多大な労力が必要とされています。研究チームはLLMを活用し、この課題の解決に挑んでいます。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475-1024x576.png)

**発表者情報**

- 研究者：Ruiyu Wang et al.
- 研究機関：トロント大学, 中国科学技術大学, マイクロソフトリサーチアジア

論文情報詳細は記事の下部に記載されています。

## 背景

CAD（コンピューター支援設計）は、産業界における3D設計作業において不可欠なツールとされています。しかし、CADモデルを作成するには専門的な知識と多大な労力が必要とされ、設計者にとって大きな負担となっています。

CADモデルはパラメトリックシーケンスと呼ばれる操作手順によって作成されます。設計者は線、円弧、円などを組み合わせて2次元スケッチを作り、それを立体化して3次元モデルを生成します。このプロセスは複雑で時間を要し、設計の度に一から作り直す必要があることが課題となっています。

自然言語による設計指示からCADモデルを自動生成できれば、設計プロセスは大幅に効率化されると期待されています。設計者は意図を自然言語で記述するだけで素早くプロトタイプを作成でき、繰り返しの作業も容易になります。また、専門的なトレーニングを受けていない人でもCAD設計に参加できるようになります。

現在、テキストからCADモデルを生成する研究は限定的です。多くの研究はランダムな生成やポイントクラウドからの生成に焦点を当てており、テキストによる制御は十分に探求されていません。また、既存の手法では、CADモデルが本質的に持つ2つの側面（パラメトリックシーケンスと視覚的な3Dモデル）を十分に考慮できていないという課題があります。

そのような状況下で、研究者らは大規模言語モデルを活用し、シーケンシャルな学習と視覚的なフィードバックを組み合わせた新しいアプローチの開発に取り組みました。これにより、テキストからの高品質なCADモデル生成の実現を目指しています。

## CADFusionフレームワーク

まずは「CADFusion」というフレームワークの全体像を紹介します。

テキストで書かれた内容からCADモデルの設計図にあたる“パラメトリックシーケンス”を自動生成し、そのシーケンスをもとに3Dモデルを作り出す仕組みがCADFusionの要です。たとえば、「円形の土台を作り、その上に長方形の柱を立ててください」といった文章を入力すると、線や円弧をどのように組み合わせればよいかを推測して命令列を作り出します。

とはいえ、最初に生成された命令列だけでは満足のいくモデルができるとは限りません。そこで、「シーケンシャル学習」段階と「視覚的フィードバック」段階のふたつを何度も行き来しながら少しずつ修正を加えていく方式が取られます。こうした段階的なアプローチによって、機能面と見た目の両方で納得のいくCADモデルが最終的に完成します。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475_3-1024x325.png)

フレームワーク全体の概念図

### Text to CAD

テキストによる説明をパラメトリックシーケンスに変換し、そこから3DのCADモデルを生成する流れが「Text to CAD」の中心となります。文章から形状をイメージするのは人間にとって難しい作業ですが、LLMの読解力を活かせば、どこに円弧を描き、どこに線を引くかといった情報を一通り推定できます。

つまるところ、LLMはCADモデルを直接出力するのではなく、「このようなコードであれば美しいCADモデルが作れるだろう」という予測をしてコードを出します。レンダリング自体は別途行います。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475_2-1024x259.png)

Text to CADの概念図

では、なぜ段階を分けて学習し直す必要があるのでしょうか。最初に出力された命令列がどれほど正確にテキストを反映していても、実際に3Dモデルとして可視化すると想定外の形状ができあがっていることがあるためです。そこを補うのが視覚的フィードバック段階で、レンダリングしたモデルの見た目を確かめながら再学習を進める構造になっています。

つまり、「思ってたのと違う」といった自覚をさせる作業が必要なのです。

以下で各段階をもう少し詳細に説明します。実際に研究者らが行ったプロセスの順に基づいています。

### 「シーケンシャル学習」段階

テキストを直接CADの命令列に変換するには、あらかじめ多くの例を学ぶことが大切です。そこで今回、テキストとパラメトリックシーケンスをセットにした訓練データが用意されました。

ところが、既存のCADデータには説明文が付属していないことが多く、そのままでは学習に使えませんでした。そこで、まず視覚言語モデルを用いてCADモデルを見ながら簡単な説明文を自動生成し、その下書きを人の手で修正して整合性を保つ工夫がされています。いわば、コンピュータと人間が協力してデータを作る手法です。こうして作られた豊富なペアデータが、テキストと形状命令を対応づける学習を支えています。

では、その学習はどのように進められるのでしょうか。

たとえば、「円柱を横に3つ並べる」という文章をLLMに与えた場合、円柱を生成する命令と、それを並べる座標を指定する命令が含まれたパラメトリックシーケンスを出力するのが理想です。

学習の過程では、生成結果が正解データとどのくらい違うかを基準にして、LLMが段階的に修正を重ねます。ベースモデルには、すでに一般的な文章を理解できるよう訓練されている事前学習モデルを使うことで効率的になります。

### 「視覚的フィードバック」段階

学習を終えていざText to CADを実行したとき、実際に3Dモデルを表示すると「形がいびつ」「要素が重なっている」など、見た目に違和感のある場合があります。

そこで必要なのが視覚的フィードバック段階です。命令列からレンダリングした3Dモデルを眺めて問題点を見つけ、修正のヒントにします。

ただし、レンダリングの結果を使って直接学習を進めるのは難しい場面があり、従来の手法ではうまく対処できませんでした。そこで研究チームは、DPO（Direct Preference Optimization）と呼ばれる方法を導入し、「見た目が良いモデル」を選びやすくする仕組みを採用しました。見栄えの良いモデルを生成する命令列ほど次に選ばれやすくなり、問題のある命令列は優先度を下げることで、だんだんと理想的な形状に近づくわけです。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475_4-1024x149.png)

「好み」のデータを集める方法

なお、このプロセスにおいては、すべてのCADモデルを人間が目で確認するのは大変です。そこで視覚言語モデルを使い、レンダリングした画像を自動的に評価させるアプローチがとられました。たとえば、要素の数は指示通りか、要素同士が衝突していないか、形状が自然かどうかといった点を確かめます。こうした評価を通じて明らかに不適切なモデルを振り落とし、より良い命令列を効率よく拾い上げる仕組みです。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475_5.png)

様々な側面からの評価

本フレームワークを整理すると以下のようになります。

1. 準備
- 事前学習済みLLMの準備
- Dee [pCA](https://ai-data-base.com/archives/26451 "主成分分析（PCA）") DデータセットからLVMを使用してキャプション生成
- 人手による注釈付けでデータの質を向上
- CAD知識での事前学習
1. トレーニング
- 初期Sequential Learning (40 [エポック](https://ai-data-base.com/archives/26594 "エポック"))
- 5回の繰り返しサイクル
	- Visual Feedback (5 [エポック](https://ai-data-base.com/archives/26594 "エポック"))
	- Sequential Learning (1 [エポック](https://ai-data-base.com/archives/26594 "エポック"))
1. 推論
- テキスト入力を受け取り
- 設定されたパラメータ（temperature=0.3, top\_p=0.9, top\_k=50）で生成
- 複数のCADシーケンスを生成
- ビジュアルオブジェクトへのレンダリング

## 実験

研究チームはCADFusionの性能を評価するため、綿密な実験計画を立てました。

まず、訓練データとしてDee [pCA](https://ai-data-base.com/archives/26451 "主成分分析（PCA）") Dデータセットをベースに、テキスト説明とCADモデルのペアを2万件用意しました。たとえば「中央に大きな円形の穴があり、四隅に小さな円形の穴がある正方形の板」といった説明文と、それに対応するCADモデルのデータが含まれています。

データ作成の第一段階では、視覚言語モデルを使って説明文の下書きを自動生成しました。しかし、自動生成された説明文はしばしば不正確または曖昧なため、人間の専門家が内容を確認し、より正確で分かりやすい表現に修正しました。たとえば「穴」という表現を「円形の開口部」に変更するなど、専門的な文脈に即した表現に改善されています。

視覚的な品質を評価するためのデータも準備されました。まず1000種類の異なる指示文それぞれについて、5つの異なるCADモデルを生成しました。生成されたモデルの中から、歪みや不自然さのある低品質なものを除外し、最終的に約1500組の「良い例・悪い例」のペアを作成しました。

実装面では、LLaMA-3-8b-Instructという言語モデルを土台として使用しました。効率的な学習のために、LoRAという手法を採用し、モデルの一部分のみを調整することで、必要な [GPU](https://ai-data-base.com/archives/26570 "GPU") メモリを削減しています。

### 性能評価結果

実験では、CADFusionと2つの比較対象システムの性能が評価されました。

1つ目の比較対象は最新の大規模言語モデルGPT-4oで、2つ目は既存のテキストからCADを生成するシステム「Text2CAD」です。評価は、モデルの形状の正確さ、指示との一致度、生成の安定性など、多角的な観点から行われました。

GPT-4oとの比較では、CADFusionが明確な優位性を示しました。GPT-4oは言語理解力に優れているにもかかわらず、CADモデルの生成においては多くの課題が見られました。たとえば、「四角形の板の中央に円形の穴」という単純な指示でも、適切な形状を生成できないケースが頻繁に発生しています。

Text2CADとの比較では、生成されるモデルの基本的な品質は同等でしたが、CADFusionはより複雑な形状や細かい指示への対応で優れた結果を示しました。たとえば、「長方形の板の四隅に丸みをつけ、中央に六角形の穴を開ける」といった複数の要素を組み合わせた指示でも、正確なモデルを生成できています。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475_6-1024x150.png)

視覚的な品質評価では、生成されたモデルを専門家が確認するだけでなく、自動評価システムによるスコアリングも行われました。評価の観点には、形状の滑らかさ、指示された要素の有無、部品同士の配置バランスなどが含まれています。その結果、CADFusionは人間による評価とシステムによる自動評価の両方で最も高いスコアを獲得しました。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475_7-1024x758.png)

さらに興味深い点として、CADFusionは同じ指示から微妙に異なる複数のバリエーションを生成できることが確認されました。たとえば、同じ「六角形の板」という指示に対して、厚みや角の丸みが少しずつ異なる複数のモデルを提案できます。そのため、ユーザーは目的や好みに応じて最適なモデルを選択できる柔軟性が得られています。

### システムの各要素の重要性を検証

研究チームは、CADFusionの各構成要素がどの程度重要な役割を果たしているのか、詳細な検証実験を行いました。最初に注目したのは、視覚的フィードバックの効果です。視覚的フィードバックを省いた基本バージョン（CADFusionSL）を作成し、性能の違いを調べました。

結果として、視覚的フィードバックを省いたバージョンでは、生成されたモデルの見た目の品質が大きく低下することが分かりました。たとえば、「四角形の板の角を丸くする」という指示に対して、丸みの度合いが不自然になるといった問題が発生しています。そのため、見た目の品質を保つには視覚的フィードバックが不可欠だと結論付けられました。

### 学習方法の影響

次に、研究チームは学習方法の違いによる影響を調査しました。

通常のCADFusionでは、基本的な形状生成の学習と視覚的な品質向上の学習を交互に行います。比較のため、視覚的な学習だけを行うバージョンと、両方の学習を同時に行うバージョンを作成し、テストを実施しました。

視覚的な学習だけを行った場合、見た目は良くても構造的に不正確なモデルが生成されるケースが多く見られました。たとえば、「六角形の穴」が歪んで五角形になってしまうといった問題が発生しています。一方、両方の学習を交互に行うことで、形状の正確さと見た目の品質の両方を維持できることが確認されました。

### データの質の重要性

最後に、訓練データの質が与える影響について検証が行われました。人間による確認と修正を省いた自動生成のデータだけで学習を行った場合、モデルの性能は大きく低下することが分かりました。たとえば、「長方形の板に円形の穴」という指示に対して、穴の位置や大きさが不適切になるといった問題が頻繁に発生しています。

しかし興味深いことに、視覚的フィードバックのデータについては、完全に自動化された評価システムでも十分な品質が得られることが確認されました。そのため、基本的な形状生成の学習には人間の確認が重要である一方、視覚的な品質向上の学習は自動化が可能だという知見が得られています。

下の表に、後半の検証結果がまとめられています。

![](https://ai-data-base.com/wp-content/uploads/2025/02/AIDB_83475_8.png)

\*この表におけるIR（Invalidity Ratio）は、生成されたCADパラメトリックシーケンスのうち、有効な視覚オブジェクトにレンダリングできなかったものの割合（%）

1. **CADFusionSL** ：シーケンシャル学習のみを用い、人手 [アノテーション](https://ai-data-base.com/archives/26297 "アノテーション") 付きデータで安定した性能を示す基本モデル。
2. **CADFusionSL-w/o HA** ：人手 [アノテーション](https://ai-data-base.com/archives/26297 "アノテーション") を用いず、自動生成データのみで学習するシーケンシャル学習モデル。
3. **CADFusionSL-VF** ：シーケンシャル学習の後に視覚的フィードバックを行い、IRが非常に高くなるモデル。
4. **CADFusionSL-VFRPO** ：視覚的フィードバックにRegularized Preference Optimization (RPO)を加え、IRを改善しつつ視覚的品質が低下したモデル。
5. **CADFusionSL-VFSL(1)w/ HA** ：視覚的フィードバックとシーケンシャル学習を1回交互に行い、人手 [アノテーション](https://ai-data-base.com/archives/26297 "アノテーション") 付きデータを用いて高いLVMスコアを得たモデル。
6. **CADFusionSL-VFSL(1)** ：視覚的フィードバックとシーケンシャル学習を1回交互に行い、自動生成データを用いてより高いLVMスコアを実現したモデル。
7. **CADFusionSL-VFSL(3)** ：3回の視覚的フィードバックとシーケンシャル学習の交互学習でさらなる性能向上を達成したモデル。
8. **CADFusionSL-VFSL(5)** ：5回の視覚的フィードバックとシーケンシャル学習の交互学習を行い、最も高いLVMスコアと許容可能なIRを両立させたモデル。

## まとめ

本記事では、テキストからCADモデルを生成する新しい手法「CADFusion」の研究を紹介しました。

本研究の特徴は、LLMをベースに、パラメトリックシーケンスの学習と視覚的フィードバックを組み合わせたアプローチを採用している点です。研究チームは、この手法により複雑な形状や複数の同一オブジェクトの生成など、従来手法では難しかった課題に対応できることを示しました。

一方で、文字の形状を表現するCADの生成や、非常に複雑な形状の生成には課題が残されています。

**参照文献情報**

- タイトル：Text-to-CAD Generation Through Infusing Visual Feedback in Large Language Models
- URL： [https://doi.org/10.48550/arXiv.2501.19054](https://doi.org/10.48550/arXiv.2501.19054)
- 著者：Ruiyu Wang, Yu Yuan, Shizhao Sun, Jiang Bian
- 所属：University of Toronto, University of Science and Technology of China, Microsoft Research Asia

## 理解度クイズ

1\. CADFusionが採用している2段階の学習プロセスとは何ですか？

CADFusionはシーケンシャル学習で基本的な形状生成を学習し、視覚的フィードバックで見た目の品質を向上させます。この2段階アプローチが高品質なCADモデル生成の鍵となっています。

解説を見る

2\. CADFusionの訓練データはどのように作成されましたか？

視覚言語モデルがCADモデルから説明文の下書きを自動生成し、人間の専門家がそれを修正して精度を向上させました。この協調的なアプローチで大規模な訓練データを効率的に作成しています。

解説を見る

3\. GPT-4oと比較した際のCADFusionの優位性は何ですか？

GPT-4oは優れた言語理解力を持つものの、基本的なCADモデル生成でも失敗が多く見られました。一方CADFusionは単純な指示から複雑な指示まで、正確な形状生成が可能です。

解説を見る

4\. CADFusionの視覚的フィードバック段階ではどのような評価を行いますか？

視覚的フィードバック段階では形状の滑らかさ、指示された要素の有無、部品同士の配置バランスなどを評価します。専門家による確認と自動評価システムの両方を活用しています。

解説を見る

5\. CADFusionの現時点での主な課題は何ですか？

CADFusionは基本的な形状生成には強みを持ちますが、文字の形状表現や非常に複雑な形状の生成には課題があります。研究チームは今後これらの課題に取り組む予定です。

解説を見る

**■サポートのお願い  
**AIDBを便利だと思っていただけた方に、任意の金額でサポートしていただけますと幸いです。  

  

[「自己修正機能を備えたプログラム合成」を実現するためのLLMエージェンティックワークフロー](https://ai-data-base.com/archives/83400)

[LLMの定理証明力を2倍に向上させる「予想と証明を繰り返させる」手法　限られたデータの中で](https://ai-data-base.com/archives/83548)

 [![](https://ai-data-base.com/wp-content/themes/innovate_hack_tcd025/img/footer/return_top.png) PAGE TOP](https://ai-data-base.com/archives/#header_top)