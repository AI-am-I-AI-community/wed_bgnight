---
title: "難しいベンチマークで高性能なLLMでも単純な問題で間違えてしまう現象について「不思議の国のアリス問題」とGPT-4o、Claude-3、Llama 3などで分析"
source: "https://ai-data-base.com/archives/70613"
author:
  - "[[AIDB Research]]"
published: 2024-06-10
created: 2025-06-13
description: "最先端のLLMであっても、人間には簡単に解けるシンプルな問題に対して誤った解答を出す現象が存在します。今回研究者らは、この現象に焦点を当てて実験で調べました。"
tags:
  - "clippings"
---
**【お知らせ】** AIDB主催のビジネスマッチングイベントを7月25日(金)開催予定です！  
  

\---以下、記事本文---

最先端のLLMであっても、人間には簡単に解けるシンプルな問題に対して誤った解答を出す現象が存在します。今回研究者らは、この現象に焦点を当てて実験で調べました。GPT-4oやClaude 3 opus、Llama 3などさまざまなモデルが対象となっています。

![](https://ai-data-base.com/wp-content/uploads/2024/06/AIDB_70613-1024x576.jpg)

**参照論文情報**

- タイトル：Alice in Wonderland: Simple Tasks Showing Complete Reasoning Breakdown in State-Of-the-Art Large Language Models
- 著者：Marianna Nezhurina, Lucia Cipolina-Kun, Mehdi Cherti, Jenia Jitsev
- 所属：LAION, Juelich Supercomputing Center (JSC), Research Center Juelich (FZJ), School of Electrical and Electronic Engineering, University of Bristol, Open-Ψ (Open-Sci) Collective.

## 背景

LLMは膨大なテキストデータを学習することで様々なタスクに適用できる汎用的な言語能力を獲得できるとされ、大きな注目を集めています。

しかし、LLMの真の能力については慎重に検証する必要があるのも事実です。標準的なベンチマークテストでは高いスコアを出すLLMでも、実際には推論能力や知識の一般化に問題があるのではないかという指摘がなされています。LLMの能力を過大評価しないように気をつけなければいけません。

そこで今回研究者らは、LLMの基本的な推論能力を評価するために、非常にシンプルな常識推論問題を考案しました。これを不思議の国のアリス問題と命名しています。  
子供でも簡単に解けるほどシンプルなのに、LLMが意外と躓いてしまうというのが特徴です。なおLLMは正しい答えに辿り着けないだけでなく、間違った答えに過剰な自信を示したり、答えを正当化しようとする様子も見られました。

なお実験されたモデル一覧は以下のとおりです。

GPT-4o-2024-05-13  
GPT-4-turbo-2024-04-09  
GPT-4-0125-preview  
GPT-4-0613  
GPT-3.5-turbo-0125  
Claude-3-opus-20240229  
Claude-3-sonnet-20240229  
Claude-3-haiku-20240307  
Gemini 1.0 Pro  
gemma-7b-it  
gemma-2b-it  
Mistral-large-2402  
Mistral-medium-2312  
Mistral-small-2402  
open-mixtral-8x22b-instruct-v0.1  
open-mixtral-8x7b-instruct-v0.1  
open-mistral-7b-instruct-v0.2  
Command R+  
Dbrx Instruct  
Llama 2 70B Chat  
Llama 2 13B Chat  
Llama 2 7B Chat  
Llama 3 70B Chat  
Llama 3 8B Chat  
Qwen 1.5 1.8B – 72B Chat

以下で実験設計と主な結果について紹介します。

## 不思議の国のアリス問題による実験設計

![](https://ai-data-base.com/wp-content/uploads/2024/06/AIDB_70613_1-970x1024.jpg)

### 問題

不思議の国のアリス問題の基本は以下のとおりです。

```js
アリスには N 人の兄弟と M 人の姉妹がいます。アリスの兄弟には何人の姉妹がいるでしょうか？
```

これは常識的推論によって簡単に解くことができると予想できる難易度の問題です。

また不思議の国のアリス問題のバリエーションとして、兄弟と姉妹の数(N と M)や順序を変えた4つの問題が用意されました。LLMが単に数字の組み合わせを当てているのではなく、問題の本質を理解しているかを確認するための工夫です。

なお、この問題が「不思議の国のアリス問題」と命名された理由について直接的な説明はありませんが、簡潔のようで解決が難しい問題であることが、不思議の国のアリスの世界観とマッチしているためかもしれません（こちらは編集部の憶測です）。

### プロンプト

LLMに不思議の国のアリス問題を解かせる際には、回答の形式を指定するプロンプトが与えられました。回答から最終的な答えを簡単に抽出し、正誤判定を行うためです。LLMの振る舞いがプロンプトの種類によって変化することが知られているため、本研究では3種類のプロンプトが用意されました:

1. STANDARD: 基本的な問題文と回答形式の指定のみ。
2. THINKING: 慎重に考えて間違いがないか確認するよう指示。
3. RESTRICTED: 最終的な答えのみを出力するよう指示。

**STANDARDのプロンプト（標準的なプロンプト）**

```js
原文: "Alice has 3 brothers and she also has 6 sisters. How many sisters does Alice's brother have? Solve this problem and provide the final answer in following form: "### Answer: "."
日本語訳: "アリスには3人の兄弟と6人の姉妹がいます。アリスの兄弟には何人の姉妹がいるでしょうか？この問題を解いて、次の形式で最終的な答えを提供してください："### Answer: "。"
```

**THINKING プロンプト（慎重に考えることを促すプロンプト）**

```js
原文: "Alice has 2 sisters and she also has 4 brothers. How many sisters does Alice's brother have? Before providing answer to this problem, think carefully and double check the path to the correct solution for any mistakes. Provide then the final answer in following form: "### Answer: "."
日本語訳: "アリスには2人の姉妹と4人の兄弟がいます。アリスの兄弟には何人の姉妹がいるでしょうか？この問題に答える前に、慎重に考えて、間違いがないか正しい解決策への道筋を再確認してください。そして、次の形式で最終的な答えを提供してください："### Answer: "。"
```

**RESTRICTED プロンプト（出力を制限するプロンプト）**

```js
原文: "Alice has 3 brothers and she also has 6 sisters. How many sisters does Alice's brother have? To answer the question, DO NOT OUTPUT ANY TEXT EXCEPT following format that contains final answer: "### Answer: "."
日本語訳: "アリスには3人の兄弟と6人の姉妹がいます。アリスの兄弟には何人の姉妹がいるでしょうか？この質問に答えるために、最終的な答えを含む次の形式以外のテキストを出力しないでください："### Answer: "。"
```

### モデル

最先端のLLMの中から、高い推論能力を評価しているモデルが選定されました。そして、APIを通じてこれらのLLMにアクセスし、自動化されたスクリプトを用いて不思議の国のアリス問題を解かせる実験が行われました（モデル一覧は前章に記載しました）。

実験では、各LLMに対して、不思議の国のアリス問題のバリエーションとプロンプトの種類の組み合わせごとに、少なくとも30回の試行が行われました。得られた回答データは、前述の評価方法に従って解析され、LLMの推論能力が評価されました。

## LLMの脆弱性を発見

本研究の実験結果から、最先端のLLMの多くが、シンプルな不思議の国のアリス問題に対して極めて脆弱であることが明らかにされました。ほとんどのLLMが一度も正解にたどり着くことができず、正答率が20%を超えるモデルはごくわずかでした。

![](https://ai-data-base.com/wp-content/uploads/2024/06/AIDB_70613_2-1024x566.jpg)

ほとんどの最先端LLMがAIWの問題で破綻することを示す様子。

わずかに正解を出せたモデルも、問題のバリエーションに対して安定した性能を示すことはできませんでした。唯一の例外は、GPT-4o（およびGPT-4）とClaude 3 Opusで、比較的高い正答率を示しました。しかし、それでも問題のバリエーションによっては大きく性能が低下する様子が観察されました。

### LLMの推論能力の欠如を示す兆候

LLMの推論能力の欠如は、正答率の低さだけでなく、いくつかの特徴的な振る舞いからも明らかにされました。

まず、LLMは間違った答えに対して過剰な自信を示す傾向がありました。自身の答えが正しいと強く主張し、推論で正当化しようとする様子が観察されました。

また、LLMが生成した回答には、問題とは無関係な社会的・文化的文脈が混入されることがありました。問題の本質からは逸脱しており、むしろ混乱を招くようなものでした。

さらに、間違いを指摘されてもLLMは答えを修正することができませんでした。修正を試みるよう求められると、さらに支離滅裂な回答を生成するだけで、結局は初めの間違った答えに固執する様子が見られました。

### 標準的なベンチマークの限界

本研究で用いられたLLMは、標準的なベンチマークテストでは高い性能を示していました。しかし、不思議の国のアリス問題に対する脆弱性を考えると、従来のベンチマークがLLMの真の推論能力を適切に評価できていない可能性が示唆されています。ベンチマークの結果だけでLLMの能力を判断することは危険であり、慎重な検証が必要とされています。

![](https://ai-data-base.com/wp-content/uploads/2024/06/AIDB_70613_3-1024x614.jpg)

AIWの正答率とMMLUの平均スコアの間に大きな不一致があることから、標準化されたベンチマークMMLUがモデルの基本的な推論能力を適切に反映して比較できないことがわかる。

### より難易度の高い「不思議の国のアリス+」問題

本研究では、不思議の国のアリス問題をさらに難しくした不思議の国のアリス+（AIW+）問題も用意されました。不思議の国のアリス+問題では、家族関係の階層構造が導入され、問題の複雑さが増しています。

不思議の国のアリス+問題の日本語訳は以下のとおりです。

```js
アリスには3人の姉妹がいます。彼女の母親には子供がいない姉妹が1人おり、その姉妹には7人の甥と姪、そして2人の兄弟がいます。アリスの父親には兄弟が1人おり、その兄弟には甥と姪が全部で5人、そして息子が1人います。アリスの姉妹にはいとこが何人いるでしょうか？
```

この問題を解く際に辿るステップは以下のようなものになります。

1. アリスの母方の家系について考えます。
	- アリスの母親の姉妹には、7人の甥と姪がいます。
	- アリスとその姉妹を除くと、3人のいとこがいることになります（7人 – アリス – アリスの3人の姉妹 = 3人）。
2. アリスの父方の家系について考えます。
	- アリスの父親の兄弟には、5人の甥と姪がいます。
	- さらに、その兄弟には息子が1人います。
	- アリスとその姉妹を除くと、2人のいとこがいることになります（5人 + 1人 – アリス – アリスの3人の姉妹 = 2人）。
3. 母方と父方のいとこの数を合計します。
	- 母方のいとこ：3人
	- 父方のいとこ：2人
	- 合計：3人 + 2人 = 5人

答えとしてはアリスの姉妹にはいとこが5人います。

上記の不思議の国のアリス+問題に対しては、不思議の国のアリス問題で比較的良い性能を示したGPT-4やClaude 3 Opusでさえ、ほぼ完全に正答できなくなってしまいました。より複雑な推論が要求される問題に対して、LLMの脆弱性がさらに顕著になったと言えます。

![](https://ai-data-base.com/wp-content/uploads/2024/06/AIDB_70613_2-1024x566.jpg)

（再掲）

以上が、研究の主な結果です。現在のLLMの推論能力における欠点を示しており、慎重な評価と改善が必要であることを示唆しています。

## まとめ

本記事では、LLMの推論能力を評価するために、シンプルな常識推論問題(不思議の国のアリス問題)を用いた研究を紹介しました。

研究の結果、最先端のLLMの多くが不思議の国のアリス問題に対して脆弱であることが明らかになりました。LLMは問題を正しく解けないだけでなく、間違いに過剰な自信を示すなどの問題行動を示しました。

また、標準的なベンチマークではLLMの推論能力が適切に評価できていない可能性も示唆されました。

LLMの実用化にはまだ課題が残されていますが、このような実験を通して分析と改善が進んでいくことが期待されています。

なお、「なぜLLMは簡単な問題にも間違えてしまうのか？」の答えや原理的な考察は今回言及されていません。LLMの推論プロセスの詳細な解明は、今後の研究課題であると言えるでしょう。

- 参照論文URL： [https://arxiv.org/abs/2406.02061](https://arxiv.org/abs/2406.02061)

**■サポートのお願い  
**AIDBを便利だと思っていただけた方に、任意の金額でサポートしていただけますと幸いです。  

  

[仮想の翻訳会社「TRANSAGENTS」に学ぶ　マルチLLMエージェントによる効果的な翻訳システム](https://ai-data-base.com/archives/70529)

[マルチモーダルLLMは従来手法よりゼロショット画像分類の精度が大幅に向上　Googleが報告](https://ai-data-base.com/archives/70709)

 [![](https://ai-data-base.com/wp-content/themes/innovate_hack_tcd025/img/footer/return_top.png) PAGE TOP](https://ai-data-base.com/archives/#header_top)